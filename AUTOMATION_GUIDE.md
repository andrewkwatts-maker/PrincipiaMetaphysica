---
render_with_liquid: false
---

# Automation Guide - Principia Metaphysica

## The Problem We Solved

Previously, parameter values existed in THREE separate places:
1. **config.py** (Python) - for SimulateTheory.py
2. **js/theory-constants.js** (JavaScript) - for HTML webpages
3. **Hard-coded HTML** - scattered throughout sections

This required **manual synchronization** - error-prone and time-consuming!

## The Solution

**config.py is now the SINGLE SOURCE OF TRUTH.**

All JavaScript values are auto-generated from config.py using `generate_js_constants.py`.

```
   config.py (EDIT THIS!)
       ↓
   generate_js_constants.py (RUN THIS!)
       ↓
   js/theory-constants.js (AUTO-GENERATED!)
       ↓
   HTML webpages (AUTO-UPDATED!)
```

---

## Quick Start

### Step 1: Edit config.py
Change any parameter value in config.py:

```python
# Example: Change Kaluza-Klein mass prediction
class V61Predictions:
    M_KK_CENTRAL = 5.0  # TeV (change this!)
    M_KK_MIN = 3.0
    M_KK_MAX = 7.0
```

### Step 2: Run the Generator
```bash
python generate_js_constants.py
```

You'll see output like:
```
SUCCESS: Imported config.py
SUCCESS: Generated js/theory-constants.js
  Total lines: 380
  File size: 13389 bytes

=== Validation ===
Dimensions: 26D -> 13D -> 4D
Generations: 3
Swampland: a = 1.414214 > 0.816497 PASS
w_0 = -0.846154
m_KK = 5.0 TeV
```

### Step 3: (Optional) Update CSV
If you want updated analysis data:
```bash
python SimulateTheory.py
```

### Step 4: View Changes
Open any HTML file - your changes are automatically live!

```html
<!-- HTML automatically uses updated values -->
<script src="js/theory-constants.js"></script>
<script>
    console.log(TheoryConstants.v61Predictions.mKKCentral); // 5.0
</script>
```

---

## Detailed Usage

### The Auto-Generated JavaScript File

**File:** `js/theory-constants.js`

**DO NOT EDIT THIS FILE MANUALLY!** It's auto-generated from config.py.

The file header warns:
```javascript
/**
 * AUTO-GENERATED from config.py by generate_js_constants.py
 * DO NOT EDIT THIS FILE MANUALLY - Edit config.py instead!
 *
 * Generated: 2025-11-25 22:06:53
 * Framework Version: v6.1
 *
 * To regenerate after editing config.py:
 *   python generate_js_constants.py
 */
```

### What Gets Exported?

All config.py parameter classes are converted to JavaScript:

```javascript
const TheoryConstants = {
    // From FundamentalConstants
    dimensions: {
        full: 26,
        effective: 13,
        observable: 4,
        nBranes: 4,
    },

    // From PhenomenologyParameters
    fundamentalScales: {
        mPlanck: 1.2195e+19,
        mGUT: 1.8e+16,
        alphaGUT: 0.0411522633744856,
    },

    // From V61Predictions
    v61Predictions: {
        mKKCentral: 5.0,
        mKKMin: 3.0,
        etaBoosted: 1000000000,
    },

    // ... and 180+ more parameters!
}
```

### Using Values in HTML

```html
<!DOCTYPE html>
<html>
<head>
    <script src="js/theory-constants.js"></script>
</head>
<body>
    <h1>Kaluza-Klein Mass Prediction</h1>
    <script>
        const TC = TheoryConstants;
        document.write(`
            <p>Central value: ${TC.v61Predictions.mKKCentral} TeV</p>
            <p>Range: ${TC.v61Predictions.mKKMin} - ${TC.v61Predictions.mKKMax} TeV</p>
            <p>Dimensions: ${TC.dimensions.full}D → ${TC.dimensions.effective}D</p>
        `);
    </script>
</body>
</html>
```

---

## Common Workflows

### Workflow 1: Update a Single Parameter

**Scenario:** LHC found new Kaluza-Klein bound at 6 TeV

```bash
# 1. Edit config.py
# Change: M_KK_MIN = 3.0 → M_KK_MIN = 6.0

# 2. Regenerate JavaScript
python generate_js_constants.py

# 3. Done! HTML shows new value
```

### Workflow 2: Add a New Prediction

**Scenario:** Adding axion mass prediction

```python
# 1. Add to config.py
class V61Predictions:
    # ... existing predictions ...
    M_AXION_CENTRAL = 1e-5  # eV (NEW!)
    M_AXION_MIN = 1e-6
    M_AXION_MAX = 1e-4
```

```bash
# 2. Regenerate JavaScript
python generate_js_constants.py
```

```javascript
// 3. Now available in JavaScript!
TheoryConstants.v61Predictions.mAxionCentral  // 1e-5
```

### Workflow 3: Bulk Update for New Paper

**Scenario:** Updating all dark energy parameters for DESI 2024

```python
# 1. Edit config.py DarkEnergyParameters class
class DarkEnergyParameters:
    W_0_OBSERVED = -0.827  # Updated from DESI
    W_0_ERROR = 0.063      # New error bars
    W_A_OBSERVED = -0.75   # Confirmed!
```

```bash
# 2. Regenerate JavaScript
python generate_js_constants.py

# 3. Update CSV analysis
python SimulateTheory.py

# 4. All HTML pages now show DESI 2024 values!
```

### Workflow 4: Version Control

```bash
# Good commit workflow:
git add config.py                  # Your edits
python generate_js_constants.py   # Generate JS
git add js/theory-constants.js    # Auto-generated file
git commit -m "Update m_KK bounds to 6 TeV (LHC Run 3 results)"
```

---

## Parameter Organization

### config.py Structure

```python
# Fundamental dimensionality
class FundamentalConstants:
    D_BULK = 26
    D_INTERNAL = 13
    D_OBS = 4
    N_BRANES = 4

# Physical measurements
class PhenomenologyParameters:
    M_PLANCK = 1.2195e19  # GeV
    M_GUT = 1.8e16        # GeV
    ALPHA_EM = 1/137.036

# Framework v6.1 predictions
class V61Predictions:
    M_KK_CENTRAL = 5.0    # TeV
    ETA_BOOSTED = 1e9
    DELTA_N_EFF = 0.12

# Dark energy (DESI 2024)
class DarkEnergyParameters:
    W_0 = -11/13
    W_A = -0.75
    OMEGA_LAMBDA = 0.6889

# ... 10+ more parameter classes
```

### JavaScript Structure

All classes converted to nested objects:

```javascript
const TheoryConstants = {
    dimensions: { ... },           // FundamentalConstants
    fundamentalScales: { ... },    // PhenomenologyParameters
    v61Predictions: { ... },       // V61Predictions
    darkEnergy: { ... },           // DarkEnergyParameters
    thermalTime: { ... },          // ThermalTimeParameters
    modifiedGravity: { ... },      // FRTTauParameters
    multiTime: { ... },            // MultiTimeParameters
    moduli: { ... },               // ModuliParameters
    landscape: { ... },            // LandscapeParameters
    neutrinos: { ... },            // NeutrinoParameters
    cmbBubbles: { ... },           // CMBBubbleParameters
    protonDecay: { ... },          // (functions converted)
    computational: { ... },        // ComputationalSettings
    metadata: { ... }              // Auto-added
}
```

---

## Validation

The generator includes automatic validation:

```python
# Dimensions check
assert TheoryConstants.dimensions.totalCheck == 13

# Generations check (falsifiable!)
assert TheoryConstants.topology.generations == 3

# Swampland constraint
assert TheoryConstants.moduli.aSwampland > TheoryConstants.moduli.swamplandBound
```

If validation fails, you'll see an error:
```
ERROR: Validation failed!
  Dimensions: 26D -> 13D -> 4D FAIL (got 12D)
```

---

## Troubleshooting

### Problem: "Module config not found"

**Solution:** Make sure you're in the correct directory
```bash
cd h:\Github\PrincipiaMetaphysica
python generate_js_constants.py
```

### Problem: "UnicodeEncodeError"

**Solution:** This was fixed in generate_js_constants.py (replaced ✓/✗ with ASCII)

### Problem: HTML shows old values

**Solution:**
1. Clear browser cache (Ctrl+Shift+R)
2. Verify js/theory-constants.js was regenerated (check timestamp)
3. Check HTML loads the correct JS file: `<script src="js/theory-constants.js"></script>`

### Problem: JavaScript syntax error

**Solution:** Check config.py for special characters in strings. The generator escapes most automatically, but verify:
```python
# Good:
DESCRIPTION = "Two-time theory"

# Bad (contains unescaped quotes):
DESCRIPTION = 'It's a "test"'  # Will break JavaScript!
```

---

## Advanced Usage

### Adding Computed Properties

You can add JavaScript getters for computed values:

```javascript
// In generated file, these work:
dimensions: {
    full: 26,
    effective: 13,

    get reductionFactor() {
        return this.full / this.effective;  // 2
    }
}
```

These are manually added in generate_js_constants.py template.

### Custom Validation Functions

The metadata object includes a validate() function:

```javascript
const result = TheoryConstants.metadata.validate();
console.log(result.allPass);  // true/false
console.log(result.checks);   // Detailed check results
```

---

## File Summary

| File | Purpose | Edit? |
|------|---------|-------|
| `config.py` | Source of truth - all parameter values | ✅ YES |
| `generate_js_constants.py` | Auto-generation script | Only for template changes |
| `js/theory-constants.js` | Auto-generated JavaScript | ❌ NO (regenerated) |
| `SimulateTheory.py` | Calculation engine | For formulas/derivations |
| `*.html` | Theory presentation | For text/layout only |

---

## Best Practices

1. **Always edit config.py, never the JS file**
2. **Run generator after every config.py change**
3. **Commit both config.py and generated JS together**
4. **Use descriptive commit messages referencing parameter changes**
5. **Check validation output after generation**
6. **Test HTML in browser after major updates**

---

## Migration Notes

**Before automation:**
- Changed M_KK in config.py ✓
- Forgot to update theory-constants.js ✗
- HTML showed old value ✗
- Manual sync required ✗

**After automation:**
- Change M_KK in config.py ✓
- Run generator ✓
- HTML automatically updated ✓
- Zero manual sync! ✓

---

## Quick Reference Commands

```bash
# Update JavaScript from config
python generate_js_constants.py

# Update CSV analysis
python SimulateTheory.py

# Full update (both systems)
python generate_js_constants.py && python SimulateTheory.py

# Verify config imports correctly
python -c "from config import *; print('OK')"

# Check generated JS file
cat js/theory-constants.js | head -20

# Find parameter in config
grep -n "M_KK" config.py

# Git workflow
git add config.py js/theory-constants.js
git commit -m "Update: brief description"
```

---

## Summary

**The Golden Rule:**
> config.py is the single source of truth. Never edit generated files.

**The Workflow:**
1. Edit config.py
2. Run `python generate_js_constants.py`
3. HTML automatically uses new values

**The Result:**
- No more manual synchronization
- No more inconsistencies
- Single source of truth
- Fast iteration on parameters
- Version control friendly

---

**Questions?** Check [ARCHITECTURE.md](ARCHITECTURE.md) for the big picture.

**Generated:** 2025-11-25
**Framework Version:** v6.1
