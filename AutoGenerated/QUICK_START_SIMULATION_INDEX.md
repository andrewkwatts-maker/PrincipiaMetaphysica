# Quick Start: Using simulation_index.json

## 1. Load the Index

```javascript
// Fetch the index
const response = await fetch('AutoGenerated/simulation_index.json');
const index = await response.json();

console.log(`Loaded ${index.total_files} simulation files`);
```

## 2. Display Domains

```javascript
// Get all domains
Object.entries(index.domains).forEach(([key, domain]) => {
  console.log(`${domain.name}: ${domain.files.length} files`);
});

// Output:
// Gauge Unification: 2 files
// Cosmological Models: 8 files
// Fermion Sector: 4 files
// ...
```

## 3. Browse Files in a Domain

```javascript
// Get gauge unification files
const gaugeFiles = index.domains['v16/gauge'].files;

gaugeFiles.forEach(file => {
  console.log(`${file.name} - ${file.description}`);
  console.log(`  Version ${file.version}, ${file.lines} lines`);
});

// Output:
// __init__.py - Gauge Simulations v16
//   Version 1.0, 16 lines
// gauge_unification_v16_0.py - Gauge Unification Simulation v16.0
//   Version 16.0, 1055 lines
```

## 4. Load a File from GitHub

```javascript
// Get a specific file
const file = index.domains['v16/gauge'].files
  .find(f => f.name === 'gauge_unification_v16_0.py');

// Fetch the code
const response = await fetch(file.github_url);
const code = await response.text();

console.log(`Loaded ${code.length} characters of code`);
```

## 5. Search All Files

```javascript
// Find all neutrino-related files
const neutrino = index.all_files.filter(f =>
  f.name.toLowerCase().includes('neutrino') ||
  f.description.toLowerCase().includes('neutrino')
);

console.log(`Found ${neutrino.length} neutrino files:`);
neutrino.forEach(f => console.log(`  - ${f.path}`));

// Output:
// Found 2 neutrino files:
//   - simulations/v16/neutrino/neutrino_mixing_v16_0.py
//   - simulations/neutrino_seesaw_solver.py
```

## 6. Build a Simple UI

```html
<div id="simulation-list"></div>

<script>
async function loadSimulations() {
  const response = await fetch('AutoGenerated/simulation_index.json');
  const index = await response.json();

  const container = document.getElementById('simulation-list');

  // Create domain sections
  for (const [key, domain] of Object.entries(index.domains)) {
    const section = document.createElement('div');
    section.innerHTML = `
      <h3>${domain.name} (${domain.files.length} files)</h3>
      <ul>
        ${domain.files.map(f => `
          <li>
            <strong>${f.name}</strong> - ${f.description}
            <br><small>v${f.version} • ${f.lines} lines • ${f.size_kb} KB</small>
          </li>
        `).join('')}
      </ul>
    `;
    container.appendChild(section);
  }
}

loadSimulations();
</script>
```

## 7. Filter by Version

```javascript
// Find all v16 files
const v16Files = index.all_files.filter(f =>
  f.version.startsWith('16.')
);

console.log(`Found ${v16Files.length} v16 files`);

// Group by domain
const byDomain = {};
v16Files.forEach(f => {
  const domain = f.path.split('/')[1]; // Get 'v16'
  const subdomain = f.path.split('/')[2] || 'root';
  const key = `${domain}/${subdomain}`;

  if (!byDomain[key]) byDomain[key] = [];
  byDomain[key].push(f);
});

console.log('V16 files by domain:', byDomain);
```

## 8. Get Statistics

```javascript
// Calculate total lines of code
const totalLines = index.all_files.reduce(
  (sum, f) => sum + f.lines,
  0
);

// Calculate total size
const totalSize = index.all_files.reduce(
  (sum, f) => sum + f.size_kb,
  0
);

// Find largest file
const largest = index.all_files.reduce(
  (max, f) => f.size_kb > max.size_kb ? f : max
);

console.log(`Total: ${totalLines.toLocaleString()} lines, ${(totalSize/1024).toFixed(2)} MB`);
console.log(`Largest: ${largest.name} (${largest.size_kb} KB)`);
```

## 9. Navigate the File Tree

```javascript
// Access via hierarchical tree
const gaugeFile = index.file_tree.v16.gauge['gauge_unification_v16_0.py'];

console.log(`File: ${gaugeFile.name}`);
console.log(`Description: ${gaugeFile.description}`);
console.log(`GitHub: ${gaugeFile.github_url}`);
```

## 10. Dynamic Code Viewer

```javascript
async function showCode(fileName) {
  // Find the file
  const file = index.all_files.find(f => f.name === fileName);
  if (!file) {
    console.error(`File not found: ${fileName}`);
    return;
  }

  // Fetch the code
  const response = await fetch(file.github_url);
  const code = await response.text();

  // Display in a modal/viewer
  const viewer = document.getElementById('code-viewer');
  viewer.innerHTML = `
    <h2>${file.name}</h2>
    <p>${file.description}</p>
    <p>Version ${file.version} • ${file.lines} lines • ${file.size_kb} KB</p>
    <pre><code>${escapeHtml(code)}</code></pre>
  `;
  viewer.style.display = 'block';
}

function escapeHtml(text) {
  const div = document.createElement('div');
  div.textContent = text;
  return div.innerHTML;
}

// Usage
showCode('gauge_unification_v16_0.py');
```

## Complete Example: Simulation Browser

See `test-simulation-loader.html` for a complete working example with:
- Domain navigation
- File browsing
- Dynamic code loading
- Statistics dashboard
- Search functionality

## Pro Tips

1. **Cache the Index**: Store in localStorage to avoid repeated fetches
2. **Lazy Load Code**: Only fetch file content when user clicks
3. **Filter Early**: Use domains to reduce data before displaying
4. **Show Progress**: Display loading indicators for GitHub fetches
5. **Handle Errors**: GitHub may rate-limit; implement retry logic

## Common Patterns

### Pattern 1: Domain Selector
```javascript
const domainSelect = document.getElementById('domain-select');
domainSelect.innerHTML = Object.entries(index.domains)
  .map(([key, domain]) =>
    `<option value="${key}">${domain.name} (${domain.files.length})</option>`
  ).join('');
```

### Pattern 2: File Search
```javascript
function searchFiles(query) {
  return index.all_files.filter(f =>
    f.name.toLowerCase().includes(query.toLowerCase()) ||
    f.description.toLowerCase().includes(query.toLowerCase())
  );
}
```

### Pattern 3: Version Filter
```javascript
function getFilesByVersion(majorVersion) {
  return index.all_files.filter(f =>
    f.version.startsWith(`${majorVersion}.`)
  );
}
```

## Index Structure Reference

```
simulation_index.json
├── generated         (string: ISO date)
├── total_files       (number)
├── domains           (object)
│   ├── v16/gauge
│   │   ├── name      (string)
│   │   └── files     (array)
│   │       └── [0]
│   │           ├── name         (string)
│   │           ├── path         (string)
│   │           ├── github_url   (string)
│   │           ├── description  (string)
│   │           ├── version      (string)
│   │           ├── lines        (number)
│   │           └── size_kb      (number)
│   └── ...
├── file_tree         (object: hierarchical)
└── all_files         (array: flat sorted list)
```

## Support

- Full Documentation: `AutoGenerated/SIMULATION_INDEX_README.md`
- Summary: `SIMULATION_INDEX_SUMMARY.md`
- Demo: `test-simulation-loader.html`
- Generator: `generate_simulation_index.py`

---

**Quick Start Guide** • Updated: 2025-12-29
