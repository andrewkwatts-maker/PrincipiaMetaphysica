# Using Experimental Values in the Website

## JavaScript Example

Here's how to display experimental values in the parameters table on the website:

```javascript
// Load theory_output.json
fetch('AutoGenerated/theory_output.json')
  .then(response => response.json())
  .then(data => {
    const parameters = data.parameters;

    // Create table rows
    Object.entries(parameters).forEach(([key, param]) => {
      const row = document.createElement('tr');

      // Parameter name
      const nameCell = document.createElement('td');
      nameCell.textContent = key;
      row.appendChild(nameCell);

      // Computed value
      const computedCell = document.createElement('td');
      const value = param.value;
      const uncertainty = param.uncertainty || 0;
      computedCell.textContent = formatValue(value, uncertainty);
      row.appendChild(computedCell);

      // Experimental value (if available)
      const expCell = document.createElement('td');
      if (param.experimentalValue !== undefined) {
        const expValue = param.experimentalValue;
        const expUncertainty = param.experimentalUncertainty || 0;
        expCell.textContent = formatValue(expValue, expUncertainty);

        // Add source as tooltip
        expCell.title = param.experimentalSource || '';
      } else {
        expCell.textContent = '—';
      }
      row.appendChild(expCell);

      // Deviation (if experimental value exists)
      const deviationCell = document.createElement('td');
      if (param.sigmaDeviation !== undefined) {
        const sigma = param.sigmaDeviation;
        deviationCell.textContent = `${sigma.toFixed(2)}σ`;

        // Color code by agreement
        if (sigma < 1.0) {
          deviationCell.className = 'excellent';  // Green
        } else if (sigma < 3.0) {
          deviationCell.className = 'good';       // Yellow
        } else {
          deviationCell.className = 'poor';       // Red
        }
      } else if (param.relativeDeviation !== undefined) {
        const percent = (param.relativeDeviation * 100).toFixed(1);
        deviationCell.textContent = `${percent}%`;
      } else {
        deviationCell.textContent = '—';
      }
      row.appendChild(deviationCell);

      // Source
      const sourceCell = document.createElement('td');
      sourceCell.textContent = param.experimentalSource || param.source || '—';
      row.appendChild(sourceCell);

      tableBody.appendChild(row);
    });
  });

// Helper function to format values with uncertainty
function formatValue(value, uncertainty) {
  if (uncertainty === 0) {
    return formatScientific(value);
  } else {
    return `${formatScientific(value)} ± ${formatScientific(uncertainty)}`;
  }
}

function formatScientific(num) {
  if (Math.abs(num) < 0.01 || Math.abs(num) > 1000) {
    return num.toExponential(3);
  } else {
    return num.toPrecision(4);
  }
}
```

## CSS Styling

Add these styles for color-coded deviations:

```css
/* Parameter table styling */
table.parameters {
  width: 100%;
  border-collapse: collapse;
}

table.parameters th,
table.parameters td {
  padding: 8px;
  text-align: left;
  border-bottom: 1px solid #ddd;
}

/* Deviation color coding */
td.excellent {
  background-color: #d4edda;
  color: #155724;
  font-weight: bold;
}

td.good {
  background-color: #fff3cd;
  color: #856404;
}

td.poor {
  background-color: #f8d7da;
  color: #721c24;
  font-weight: bold;
}

/* Tooltip for sources */
td[title]:hover {
  cursor: help;
  text-decoration: underline;
}
```

## HTML Table Structure

```html
<table class="parameters">
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Computed Value</th>
      <th>Experimental Value</th>
      <th>Deviation</th>
      <th>Source</th>
    </tr>
  </thead>
  <tbody id="parameters-table-body">
    <!-- Rows will be populated by JavaScript -->
  </tbody>
</table>
```

## Filter by Agreement

Add a filter to show only parameters with experimental values:

```javascript
// Filter parameters by agreement level
function filterByAgreement(level) {
  const rows = document.querySelectorAll('#parameters-table-body tr');

  rows.forEach(row => {
    const deviationCell = row.querySelector('td:nth-child(4)');

    if (level === 'all') {
      row.style.display = '';
    } else if (level === 'experimental') {
      // Show only parameters with experimental values
      if (deviationCell.textContent !== '—') {
        row.style.display = '';
      } else {
        row.style.display = 'none';
      }
    } else if (level === 'excellent') {
      if (deviationCell.classList.contains('excellent')) {
        row.style.display = '';
      } else {
        row.style.display = 'none';
      }
    } else if (level === 'good') {
      if (deviationCell.classList.contains('good')) {
        row.style.display = '';
      } else {
        row.style.display = 'none';
      }
    } else if (level === 'poor') {
      if (deviationCell.classList.contains('poor')) {
        row.style.display = '';
      } else {
        row.style.display = 'none';
      }
    }
  });
}
```

## Summary Statistics Widget

Display summary statistics at the top of the page:

```javascript
function displaySummaryStats(parameters) {
  const stats = {
    total: Object.keys(parameters).length,
    withExperimental: 0,
    excellent: 0,
    good: 0,
    poor: 0
  };

  Object.values(parameters).forEach(param => {
    if (param.experimentalValue !== undefined) {
      stats.withExperimental++;

      if (param.sigmaDeviation !== undefined) {
        const sigma = param.sigmaDeviation;
        if (sigma < 1.0) {
          stats.excellent++;
        } else if (sigma < 3.0) {
          stats.good++;
        } else {
          stats.poor++;
        }
      }
    }
  });

  const html = `
    <div class="stats-widget">
      <h3>Parameter Statistics</h3>
      <ul>
        <li><strong>Total Parameters:</strong> ${stats.total}</li>
        <li><strong>With Experimental Values:</strong> ${stats.withExperimental}</li>
        <li class="excellent"><strong>Excellent Agreement (&lt; 1σ):</strong> ${stats.excellent} (${(100*stats.excellent/stats.withExperimental).toFixed(1)}%)</li>
        <li class="good"><strong>Good Agreement (1-3σ):</strong> ${stats.good} (${(100*stats.good/stats.withExperimental).toFixed(1)}%)</li>
        <li class="poor"><strong>Poor Agreement (&gt; 3σ):</strong> ${stats.poor} (${(100*stats.poor/stats.withExperimental).toFixed(1)}%)</li>
      </ul>
    </div>
  `;

  document.getElementById('stats-container').innerHTML = html;
}
```

## Data Fields Reference

Each parameter in theory_output.json now includes:

### Standard Fields (all parameters)
- `value`: Computed value from PM theory
- `uncertainty`: Computational uncertainty (if available)
- `source`: Source simulation or ESTABLISHED physics
- `status`: DERIVED, GEOMETRIC, ESTABLISHED, or CALIBRATED
- `metadata.description`: Human-readable description
- `metadata.units`: Physical units

### Experimental Fields (39 parameters)
- `experimentalValue`: Measured value from experiments
- `experimentalUncertainty`: Experimental uncertainty (1σ)
- `experimentalSource`: Citation (e.g., "PDG 2024", "NuFIT 6.0")
- `relativeDeviation`: |computed - experimental| / |experimental|
- `sigmaDeviation`: |computed - experimental| / uncertainty
- `oomAgreement`: Boolean - within 1 order of magnitude?
- `oomDifference`: Absolute log₁₀ difference

## Example Parameter

```json
{
  "pdg.m_higgs": {
    "value": 125.1,
    "source": "ESTABLISHED:PDG2024",
    "uncertainty": 0.14,
    "status": "DERIVED",
    "metadata": {
      "description": "Higgs boson mass",
      "units": "GeV"
    },
    "experimentalValue": 125.1,
    "experimentalUncertainty": 0.14,
    "experimentalSource": "PDG 2024",
    "relativeDeviation": 0.0,
    "sigmaDeviation": 0.0,
    "oomAgreement": true,
    "oomDifference": 0.0
  }
}
```
