# Link Audit Report - Principia Metaphysica Website

## Executive Summary

**Total Files Scanned:** 55 HTML files
**Total Issues Found:** 207 broken links
**Date:** 2025-12-29

## Issues by Category

| Category | Count | Priority |
|----------|-------|----------|
| Internal Page Links | 100 | HIGH |
| Images | 48 | HIGH |
| JSON Data Files | 32 | CRITICAL |
| JavaScript Files | 26 | CRITICAL |
| CSS Files | 1 | MEDIUM |

---

## Critical Issues (Must Fix)

### 1. Missing JavaScript File: `theory-constants-enhanced.js`
**Files Affected:** 11 HTML files
**Issue:** Referenced from multiple foundation pages but doesn't exist in root
**Impact:** JavaScript errors, broken functionality

**Affected Files:**
- `diagrams/theory-diagrams.html`
- `docs/beginners-guide-printable.html`
- `docs/computational-appendices.html`
- All files in `foundations/` folder (10 files)

**Fix:**
```
OPTION 1: Move/create the file
- Check if file exists in Pages/ folder
- If so: Copy to root directory
- If not: Remove references or create placeholder

OPTION 2: Update all references
- Change from: ../theory-constants-enhanced.js
- Change to: ../Pages/theory-constants-enhanced.js (if it exists there)
```

### 2. Missing JSON Data Files
**Files Affected:** Multiple pages loading section data
**Issue:** JSON files not found or incorrect paths

**Specific Issues:**
- `/AutoGenerated/sections/section-4.json` - NOT FOUND
- Multiple AutoGenerated/formulas.json path variations

**Fix:**
```bash
# Check what actually exists
ls AutoGenerated/

# If sections are in theory_output.json instead:
# Update loaders to use theory_output.json instead of individual section JSON files
```

### 3. Missing Root HTML Files
**Issue:** Many links point to root-level HTML files that don't exist
**Files Not Found:**
- `paper.html` (root) - Should be `Pages/paper.html`
- `foundations.html` (root) - Should be `Pages/foundations.html`
- `sections.html` (root) - Should be `Pages/sections.html`
- `references.html` (root) - Should be `Pages/references.html`
- `beginners-guide.html` (root) - Should be `Pages/beginners-guide.html`

**Fix:** Update ALL links from `../foundations.html` to `../Pages/foundations.html` etc.

---

## High Priority Issues

### 4. Missing Image Directory Structure
**Files Affected:** `Pages/visualization-index.html` and `Pages/philosophical-implications.html`
**Issue:** 48 missing images referenced as `images/...`

**Missing Images Directory:**
Current structure expects: `Pages/images/`
Files look for: relative `images/` from Pages/

**Missing Images Include:**
- `14d-times-2-structure.png`
- `kk-spectrum-2d-grid.png`
- `g2-manifold.png`
- `standard-model-particles.png`
- ... (44 more)

**Fix:**
```bash
# Check if images exist elsewhere
find . -name "*.png" -o -name "*.svg" | grep -v node_modules

# Option 1: Create images directory and add placeholders
mkdir -p Pages/images
# Add placeholder images or copy from assets

# Option 2: Update visualization-index.html to use different image source
```

### 5. Missing Section HTML Files
**Issue:** Links to individual section HTML files that don't exist
**Pattern:** `../sections/[section-name].html`

**Missing Files:**
- `sections/thermal-time.html`
- `sections/fermion-sector.html`
- `sections/cosmology.html`
- `sections/index.html`

**Fix:**
```
OPTION 1: Create section HTML files
- Use sections.html as template
- Extract content from theory_output.json

OPTION 2: Update links to use sections.html with hash
- Change: ../sections/thermal-time.html
- To: ../Pages/sections.html#thermal-time
```

---

## Medium Priority Issues

### 6. Component Template Links (Ignore if Templates)
**Files:** `components/nav.html`, `components/page-template.html`, `components/index.html`
**Issue:** 24 broken links to example/placeholder pages
**Note:** These may be example templates, not actual production files

**Examples:**
- `/mythology`, `/deities`, `/cosmology`, `/codex`, `/timeline`, etc.

**Recommendation:** If these are just example components/templates, add comments clarifying they're examples

### 7. Missing Foundation Cross-Links
**Issue:** `einstein-field-equations.html` referenced but doesn't exist in foundations/

**Affected Files:**
- `foundations/boltzmann-entropy-dynamic.html`
- `foundations/boltzmann-entropy.html`
- `foundations/clifford-algebra.html`

**Fix:** Either create the file or remove the links

---

## Recommended Fixes (In Priority Order)

### PHASE 1: Fix Critical Path Issues (Do First)

#### Fix 1: Update Root HTML References
```bash
# Update all references from root-level to Pages/
find . -name "*.html" -not -path "*/node_modules/*" -not -path "*/zenodo_package/*" \
  -exec sed -i 's|"\.\./paper\.html"|"../Pages/paper.html"|g' {} \;

find . -name "*.html" -not -path "*/node_modules/*" -not -path "*/zenodo_package/*" \
  -exec sed -i 's|"\.\./foundations\.html"|"../Pages/foundations.html"|g' {} \;

find . -name "*.html" -not -path "*/node_modules/*" -not -path "*/zenodo_package/*" \
  -exec sed -i 's|"\.\./sections\.html"|"../Pages/sections.html"|g' {} \;

find . -name "*.html" -not -path "*/node_modules/*" -not -path "*/zenodo_package/*" \
  -exec sed -i 's|"\.\./references\.html"|"../Pages/references.html"|g' {} \;

find . -name "*.html" -not -path "*/node_modules/*" -not -path "*/zenodo_package/*" \
  -exec sed -i 's|"\.\./beginners-guide\.html"|"../Pages/beginners-guide.html"|g' {} \;
```

#### Fix 2: Resolve theory-constants-enhanced.js
```bash
# Check if file exists
find . -name "theory-constants-enhanced.js" | grep -v node_modules

# If found in Pages/, update references:
find . -name "*.html" -not -path "*/node_modules/*" \
  -exec sed -i 's|"\.\./theory-constants-enhanced\.js"|"../Pages/theory-constants-enhanced.js"|g' {} \;

# If not found, remove script tags or create placeholder
```

#### Fix 3: Update Section Links to Use Hash Navigation
```bash
# Change section file links to hash navigation on sections.html
# Example: ../sections/thermal-time.html -> ../Pages/sections.html#thermal-time

# This requires manual review of each link to determine correct hash
```

### PHASE 2: Fix Images

#### Fix 4: Create Images Directory or Update Paths
```bash
# Option A: Create placeholder structure
mkdir -p Pages/images
# Add missing images or create placeholder SVGs

# Option B: Update visualization-index.html to use CDN/external images
# Or comment out missing images with TODO notes
```

### PHASE 3: Cleanup & Documentation

#### Fix 5: Add Comments to Template Files
Add HTML comments to template files in `components/` noting they are examples:
```html
<!--
  NOTE: This is a template/example component.
  Links like /mythology, /deities are placeholders.
  Do not use in production.
-->
```

#### Fix 6: Create Missing Foundation Files or Remove Links
Either:
- Create `foundations/einstein-field-equations.html`
- OR remove all references to it

---

## Automated Fix Script

See `fix_broken_links.py` for automated fixes of common issues.

```bash
python fix_broken_links.py
```

This will:
1. ✅ Update root HTML references to Pages/
2. ✅ Fix theory-constants-enhanced.js references
3. ✅ Update section links to use hash navigation
4. ⚠️ Report remaining issues requiring manual intervention

---

## Files Requiring Manual Review

The following files have complex link issues requiring manual review:

1. **Pages/visualization-index.html** (48 missing images)
2. **Pages/formulas.html** (8 broken links)
3. **Pages/references.html** (9 broken links)
4. **Pages/simulations.html** (10 broken links)
5. **index.html** (10 broken links)

---

## Testing After Fixes

```bash
# Re-run audit
python audit_links.py

# Expected result:
# - JavaScript issues: 0
# - Root HTML references: 0
# - Remaining: Image issues + template examples only
```

---

## Notes

- **Component templates** (`components/nav.html`, `components/page-template.html`) contain example links that can be ignored if they're not used in production
- **zenodo_package** folder appears to be a duplicate/package - not audited as thoroughly
- Consider adding a **pre-commit hook** to check for broken links before deployment

---

## Summary of Required Actions

**Must Do:**
1. Move or update `theory-constants-enhanced.js` references (26 files)
2. Update root HTML file references to `Pages/` (50+ files)
3. Fix section navigation to use hash links instead of separate files (20+ files)

**Should Do:**
4. Add missing images or update image references (48 images)
5. Create or remove `einstein-field-equations.html` references (4 files)

**Optional:**
6. Add comments to template files clarifying they're examples
7. Consider restructuring to have all HTML files in root or all in Pages/

**Total Estimated Fix Time:** 2-3 hours

---

Generated by `audit_links.py` on 2025-12-29
