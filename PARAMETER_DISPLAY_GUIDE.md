# Parameter Display in Paper - Scientific Rigor Guide

## Overview

The Principia Metaphysica paper now features enhanced parameter display with full scientific rigor. All 171+ parameters from `AutoGenerated/parameters.json` can be referenced inline with proper formatting, units, uncertainties, and interactive tooltips.

## Components Created

### 1. `pm-param-paper.js` - Enhanced Parameter Component
Scientific parameter display with:
- Automatic scientific notation for large/small values
- Proper unit rendering (GeV, eV², dimensionless)
- Uncertainty display (± Δvalue)
- Source attribution badges (ESTABLISHED, DERIVED, PREDICTED, etc.)
- Rich tooltip with full metadata
- Links to full parameter page

### 2. `pm-paper-param-processor.js` - Inline Reference Processor
Automatically converts text references like `{{param:gauge.M_GUT}}` into interactive `<pm-param-paper>` components throughout the paper.

### 3. `pm-parameter-table.js` - Appendix Tables
Sortable, filterable table for displaying all parameters in appendices with:
- Column sorting (click headers)
- Search/filter functionality
- Compact mode for space-saving
- Status badges and source attribution

## Installation

Add to `Pages/paper.html` after the existing scripts:

```html
<script src="../js/pm-constants-loader.js"></script>
<script src="../js/pm-formula-loader.js"></script>
<script src="../js/pm-paper-renderer.js"></script>
<!-- ADD THESE THREE LINES -->
<script src="../js/pm-param-paper.js"></script>
<script src="../js/pm-paper-param-processor.js"></script>
<script src="../js/pm-parameter-table.js"></script>
```

## Usage Examples

### 1. Inline Parameter References (Automatic Processing)

In your JSON content blocks, use the `{{param:key}}` syntax:

```json
{
  "type": "text",
  "text": "The Grand Unification scale is {{param:gauge.M_GUT}}, which gives a proton lifetime of {{param:proton_decay.tau_p_years}}."
}
```

This automatically becomes:
> "The Grand Unification scale is **2.1 × 10¹⁶ GeV** *(hover for details)*, which gives a proton lifetime of **4.76 × 10³⁴ years** *(hover for details)*."

### 2. Explicit Parameter Component

For more control, use the component directly in HTML:

```html
<p>
  The Higgs mass is
  <pm-param-paper key="higgs.m_higgs_pred" show-uncertainty="true"></pm-param-paper>
  from phenomenological constraints.
</p>
```

**Attributes:**
- `key` - Parameter key from parameters.json (required)
- `format` - Value format: "auto", "scientific", "fixed", "integer", "engineering"
- `show-uncertainty` - Display ± uncertainty: "true" or "false"
- `show-units` - Display units: "true" (default) or "false"
- `show-source` - Display source badge: "true" or "false"
- `inline` - Inline vs block display: "true" (default) or "false"

### 3. Parameter Table (for Appendices)

Display all parameters in sortable table:

```html
<!-- All parameters -->
<pm-parameter-table></pm-parameter-table>

<!-- Filtered by category -->
<pm-parameter-table category="gauge"></pm-parameter-table>

<!-- Filtered by status -->
<pm-parameter-table status="ESTABLISHED"></pm-parameter-table>

<!-- Compact mode (smaller text, fewer columns) -->
<pm-parameter-table compact="true"></pm-parameter-table>

<!-- Disable sorting/filtering -->
<pm-parameter-table sortable="false" filterable="false"></pm-parameter-table>
```

## Scientific Notation Examples

The component automatically formats values based on magnitude:

| Value | Display |
|-------|---------|
| 2.435e18 | 2.44 × 10¹⁸ GeV |
| 0.0072973525692838015 | 7.30 × 10⁻³ |
| 125.1 | 125.1 GeV |
| 3 | 3 (integer) |

## Units Formatting

Units are automatically formatted with proper typography:

| Input | Display |
|-------|---------|
| `GeV` | GeV |
| `eV^2` | eV² |
| `GeV^-2` | GeV⁻² |
| `GeV·s` | GeV·s |
| `dimensionless` | *(hidden by default)* |

## Status Badges

Parameters display colored badges indicating their provenance:

- **ESTABLISHED** (green) - From experimental data (PDG, CODATA, etc.)
- **DERIVED** (blue) - Computed from established values
- **PREDICTED** (orange) - Theory predictions awaiting verification
- **GEOMETRIC** (purple) - Pure geometric/topological results
- **CALIBRATED** (pink) - Fitted to match observations
- **PHENOMENOLOGICAL** (light green) - Constrained by experiments

## Tooltip Information

Hovering over any parameter shows:
- Full parameter key
- Status badge
- Description
- Source attribution
- Units
- Uncertainty (if available)
- Link to full parameter page

## Example: Complete Section with Parameters

```json
{
  "id": "4.2",
  "title": "Gauge Unification",
  "contentBlocks": [
    {
      "type": "text",
      "text": "The three gauge couplings of the Standard Model unify at the scale {{param:gauge.M_GUT}} with unified coupling {{param:gauge.ALPHA_GUT}}. This scale is derived from 3-loop RG evolution using the initial conditions from PDG 2024."
    },
    {
      "type": "text",
      "text": "The geometric prediction from G₂ torsion gives {{param:gauge.M_GUT_GEOMETRIC}}, which is used for proton decay calculations. The weak mixing angle at the GUT scale is {{param:gauge.sin2_theta_W_gut}}, consistent with SO(10) unification predicting 3/8."
    }
  ]
}
```

## Appendix D: Complete Parameter Table

Add to your appendices:

```html
<section id="appendix-d">
  <h2>Appendix D: Complete Parameter Listing</h2>

  <h3>D.1 Fundamental Constants</h3>
  <pm-parameter-table category="constants"></pm-parameter-table>

  <h3>D.2 PDG Experimental Inputs</h3>
  <pm-parameter-table category="pdg"></pm-parameter-table>

  <h3>D.3 Gauge Sector</h3>
  <pm-parameter-table category="gauge"></pm-parameter-table>

  <h3>D.4 Fermion Sector</h3>
  <pm-parameter-table category="fermion"></pm-parameter-table>

  <h3>D.5 All Parameters (Sortable)</h3>
  <pm-parameter-table sortable="true" filterable="true"></pm-parameter-table>
</section>
```

## Testing Coverage

The system handles all 171+ parameters including:

1. **Fundamental Constants** (5 params)
   - M_PLANCK, alpha_em, m_proton, HBAR, G_NEWTON

2. **PDG Inputs** (30+ params)
   - Particle masses, coupling constants, mixing angles

3. **Gauge Unification** (5 params)
   - M_GUT, ALPHA_GUT, sin2_theta_W_gut

4. **Fermion Generation** (6 params)
   - n_generations, yukawa_hierarchy, chiral_filter_strength

5. **CKM Matrix** (10 params)
   - V_us, V_cb, V_ub, V_td, V_ts, V_tb, Jarlskog invariant, Wolfenstein params

6. **Proton Decay** (4 params)
   - tau_p_years, suppression_factor, branching ratios

7. **Cosmology** (15+ params)
   - w0, wa, Omega_DM_over_b, moduli parameters

8. **Neutrino Mixing** (4 params)
   - theta_12, theta_13, theta_23, delta_CP

9. **Topology** (8 params)
   - chi_eff, b2, b3, n_gen, K_MATCHING

10. **Derived Parameters** (50+ params)
    - All computation results from simulations

## Print Styles

Parameters automatically adjust for print:
- Tooltips are hidden
- Dotted underlines removed
- Scientific notation preserved
- Tables paginate properly

## Mobile Responsive

Parameters scale gracefully on mobile:
- Tooltips adapt to screen width
- Tables become horizontally scrollable
- Text remains readable

## Performance

- Parameters loaded once from AutoGenerated/parameters.json
- Cached in window.PM.parameters
- No re-fetching for multiple references
- Tooltips are CSS-only (no JS overhead)

## Troubleshooting

**Parameters not loading?**
1. Check that AutoGenerated/parameters.json exists
2. Verify scripts are loaded in correct order
3. Check console for fetch errors
4. Ensure path prefixes are correct

**Tooltips not showing?**
1. Check Shadow DOM is supported
2. Verify hover events are working
3. Check z-index conflicts

**Inline references not converting?**
1. Ensure pm-paper-param-processor.js is loaded
2. Check that {{param:key}} syntax is exact
3. Verify processor runs after paper renderer

## Future Enhancements

Potential improvements:
1. LaTeX export support for academic journals
2. Citation export (BibTeX format)
3. Parameter comparison mode (theory vs experiment)
4. Timeline view (show parameter evolution across versions)
5. Interactive error propagation visualization
6. Parameter dependency graph

## Support

For issues or questions:
- Check console for error messages
- Verify parameters.json structure
- Test with known working examples
- Review component source code

---

**Copyright (c) 2025-2026 Andrew Keith Watts. All rights reserved.**
