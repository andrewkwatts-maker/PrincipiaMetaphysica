<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="1100" height="800" xmlns="http://www.w3.org/2000/svg">
  <!-- Title -->
  <text x="550" y="35" font-size="26" font-weight="bold" text-anchor="middle" font-family="Arial, sans-serif">
    Three Independent Paths to n<tspan baseline-shift="sub" font-size="20">gen</tspan> = 3
  </text>
  <text x="550" y="60" font-size="14" text-anchor="middle" fill="#555" font-style="italic">
    Consistency Check: All formulations converge to 3 generations
  </text>

  <!-- Path 1: Single G₂ -->
  <g id="path1">
    <rect x="50" y="100" width="300" height="200" fill="#3498db" fill-opacity="0.15" stroke="#2980b9" stroke-width="3" rx="10"/>
    <text x="200" y="130" font-size="20" font-weight="bold" text-anchor="middle" fill="#2980b9">Path 1: Single G₂ Manifold</text>

    <!-- Step 1 -->
    <rect x="80" y="150" width="240" height="40" fill="#ecf0f1" stroke="#2c3e50" stroke-width="2" rx="5"/>
    <text x="200" y="175" font-size="14" text-anchor="middle">χ(G₂) = 72 (flux-dressed)</text>

    <!-- Arrow -->
    <path d="M 200 190 L 200 200" stroke="#2c3e50" stroke-width="2" marker-end="url(#arrowhead)"/>

    <!-- Step 2 -->
    <rect x="80" y="205" width="240" height="40" fill="#ecf0f1" stroke="#2c3e50" stroke-width="2" rx="5"/>
    <text x="200" y="230" font-size="14" text-anchor="middle">n<tspan baseline-shift="sub" font-size="11">gen</tspan> = χ / 24 = 72 / 24</text>

    <!-- Arrow -->
    <path d="M 200 245 L 200 255" stroke="#2c3e50" stroke-width="2" marker-end="url(#arrowhead)"/>

    <!-- Result -->
    <ellipse cx="200" cy="275" rx="50" ry="20" fill="#27ae60" stroke="#229954" stroke-width="3"/>
    <text x="200" y="281" font-size="18" font-weight="bold" text-anchor="middle" fill="white">n<tspan baseline-shift="sub" font-size="14">gen</tspan> = 3</text>
  </g>

  <!-- Path 2: Mirror Pair -->
  <g id="path2">
    <rect x="400" y="100" width="300" height="200" fill="#9b59b6" fill-opacity="0.15" stroke="#8e44ad" stroke-width="3" rx="10"/>
    <text x="550" y="130" font-size="20" font-weight="bold" text-anchor="middle" fill="#8e44ad">Path 2: Z₂ Mirror Pair</text>

    <!-- Step 1 -->
    <rect x="430" y="150" width="240" height="40" fill="#ecf0f1" stroke="#2c3e50" stroke-width="2" rx="5"/>
    <text x="550" y="175" font-size="14" text-anchor="middle">χ<tspan baseline-shift="sub" font-size="11">total</tspan> = 2 × χ(G₂) = 144</text>

    <!-- Arrow -->
    <path d="M 550 190 L 550 200" stroke="#2c3e50" stroke-width="2" marker-end="url(#arrowhead)"/>

    <!-- Step 2 -->
    <rect x="430" y="205" width="240" height="40" fill="#ecf0f1" stroke="#2c3e50" stroke-width="2" rx="5"/>
    <text x="550" y="230" font-size="14" text-anchor="middle">n<tspan baseline-shift="sub" font-size="11">gen</tspan> = χ / (24 × 2) = 144 / 48</text>

    <!-- Arrow -->
    <path d="M 550 245 L 550 255" stroke="#2c3e50" stroke-width="2" marker-end="url(#arrowhead)"/>

    <!-- Result -->
    <ellipse cx="550" cy="275" rx="50" ry="20" fill="#27ae60" stroke="#229954" stroke-width="3"/>
    <text x="550" y="281" font-size="18" font-weight="bold" text-anchor="middle" fill="white">n<tspan baseline-shift="sub" font-size="14">gen</tspan> = 3</text>
  </g>

  <!-- Path 3: Z₂ Quotient -->
  <g id="path3">
    <rect x="750" y="100" width="300" height="200" fill="#e67e22" fill-opacity="0.15" stroke="#d35400" stroke-width="3" rx="10"/>
    <text x="900" y="130" font-size="20" font-weight="bold" text-anchor="middle" fill="#d35400">Path 3: Z₂ Quotient</text>

    <!-- Step 1 -->
    <rect x="780" y="150" width="240" height="40" fill="#ecf0f1" stroke="#2c3e50" stroke-width="2" rx="5"/>
    <text x="900" y="175" font-size="14" text-anchor="middle">χ(M/Z₂) = χ(M) / 2 = 144 / 2</text>

    <!-- Arrow -->
    <path d="M 900 190 L 900 200" stroke="#2c3e50" stroke-width="2" marker-end="url(#arrowhead)"/>

    <!-- Step 2 -->
    <rect x="780" y="205" width="240" height="40" fill="#ecf0f1" stroke="#2c3e50" stroke-width="2" rx="5"/>
    <text x="900" y="230" font-size="14" text-anchor="middle">n<tspan baseline-shift="sub" font-size="11">gen</tspan> = 72 / 24 (single G₂)</text>

    <!-- Arrow -->
    <path d="M 900 245 L 900 255" stroke="#2c3e50" stroke-width="2" marker-end="url(#arrowhead)"/>

    <!-- Result -->
    <ellipse cx="900" cy="275" rx="50" ry="20" fill="#27ae60" stroke="#229954" stroke-width="3"/>
    <text x="900" y="281" font-size="18" font-weight="bold" text-anchor="middle" fill="white">n<tspan baseline-shift="sub" font-size="14">gen</tspan> = 3</text>
  </g>

  <!-- Convergence arrows -->
  <g id="convergence">
    <path d="M 200 300 Q 350 400 520 480" stroke="#27ae60" stroke-width="4" fill="none" marker-end="url(#greenarrow)" stroke-dasharray="10,5"/>
    <path d="M 550 300 L 550 480" stroke="#27ae60" stroke-width="4" fill="none" marker-end="url(#greenarrow)"/>
    <path d="M 900 300 Q 750 400 580 480" stroke="#27ae60" stroke-width="4" fill="none" marker-end="url(#greenarrow)" stroke-dasharray="10,5"/>
  </g>

  <!-- Final Result Box -->
  <g id="final_result">
    <rect x="350" y="490" width="400" height="120" fill="#27ae60" stroke="#229954" stroke-width="4" rx="15"/>
    <text x="550" y="530" font-size="28" font-weight="bold" text-anchor="middle" fill="white">CONSISTENCY CHECK: ✓ PASS</text>
    <text x="550" y="565" font-size="20" text-anchor="middle" fill="white">All 3 formulations → n<tspan baseline-shift="sub" font-size="16">gen</tspan> = 3</text>
    <text x="550" y="595" font-size="14" text-anchor="middle" fill="#ecf0f1">(matches observed particle generations)</text>
  </g>

  <!-- Detailed Explanation Box -->
  <g id="explanation">
    <rect x="50" y="640" width="1000" height="135" fill="#ecf0f1" stroke="#2c3e50" stroke-width="2" rx="8"/>
    <text x="550" y="665" font-size="16" font-weight="bold" text-anchor="middle">Mathematical Details:</text>

    <!-- Path 1 details -->
    <text x="80" y="690" font-size="12" font-weight="bold" fill="#2980b9">Path 1 (Single G₂):</text>
    <text x="80" y="705" font-size="11">• G₂ holonomy manifold with flux quantization</text>
    <text x="80" y="720" font-size="11">• Effective Euler characteristic χ<tspan baseline-shift="sub" font-size="9">eff</tspan> = 72 (flux-dressed geometry)</text>
    <text x="80" y="735" font-size="11">• Index theorem: n<tspan baseline-shift="sub" font-size="9">gen</tspan> = |χ| / 24 (from Dirac operator zero modes)</text>

    <!-- Path 2 details -->
    <text x="380" y="690" font-size="12" font-weight="bold" fill="#8e44ad">Path 2 (Mirror Pair):</text>
    <text x="380" y="705" font-size="11">• Z₂ mirror symmetry doubles degrees of freedom</text>
    <text x="380" y="720" font-size="11">• Total χ = 144, but mirroring factor = 2</text>
    <text x="380" y="735" font-size="11">• Division by 48 accounts for both chirality and mirroring</text>

    <!-- Path 3 details -->
    <text x="680" y="690" font-size="12" font-weight="bold" fill="#d35400">Path 3 (Z₂ Quotient):</text>
    <text x="680" y="705" font-size="11">• Orbifold construction: M/Z₂ reduces Euler char by half</text>
    <text x="680" y="720" font-size="11">• χ(M/Z₂) = 144/2 = 72 (back to single G₂ value)</text>
    <text x="680" y="735" font-size="11">• Standard formula: n<tspan baseline-shift="sub" font-size="9">gen</tspan> = 72 / 24 = 3</text>

    <!-- Bottom note -->
    <text x="550" y="760" font-size="11" text-anchor="middle" font-style="italic" fill="#555">
      All three paths are topologically equivalent and yield the same physical prediction
    </text>
  </g>

  <!-- Arrow markers -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#2c3e50"/>
    </marker>
    <marker id="greenarrow" markerWidth="12" markerHeight="12" refX="10" refY="3" orient="auto">
      <polygon points="0 0, 12 3, 0 6" fill="#27ae60"/>
    </marker>
  </defs>
</svg>
