# Global Validator for Principia Metaphysica

## Overview

The `global_validator.py` script automatically validates ALL PM simulation outputs against experimental constraints from multiple authoritative sources.

## Data Sources

The validator compares computed parameters against:

- **NuFIT 6.0 (2025)**: Neutrino oscillation parameters (θ₁₂, θ₂₃, θ₁₃, δCP, Δm²₂₁, Δm²₃₁)
- **DESI DR2 (2025)**: Dark energy equation of state (w₀, wₐ)
- **Planck 2025**: Cosmological parameters (H₀, Ωₘ, Σmᵥ)
- **Super-Kamiokande 2024**: Proton decay bounds (τₚ > 1.67×10³⁴ years)
- **PDG 2024 / LHC**: Particle masses (Higgs, top, W, Z) and coupling constants (αₛ)

## Usage

### Basic Usage

```bash
python simulations/global_validator.py
```

This validates `AutoGenerated/theory_output.json` and prints a human-readable report to the console.

### Save JSON Report

```bash
python simulations/global_validator.py --save
```

Saves a detailed validation report to `simulations/validation_report.json`.

### Custom Theory Output

```bash
python simulations/global_validator.py path/to/custom_theory_output.json
```

### Help

```bash
python simulations/global_validator.py --help
```

## Validation Criteria

The validator calculates sigma deviations for each parameter:

- **PASS** (< 1σ): Parameter agrees with experiment within 1 standard deviation
- **TENSION** (1-2σ): Minor tension, review recommended
- **WARNING** (2-3σ): Significant deviation, review needed
- **FAIL** (> 3σ): Major disagreement, critical review required

## Output

### Console Report

The console output includes:

1. **Summary Statistics**: Overall status, chi-squared, parameter counts
2. **Detailed Parameter Validation**: Per-parameter comparison with experiment
3. **Dataset Conflicts**: Flags when datasets disagree (e.g., Hubble tension)
4. **Geometric Inconsistencies**: Missing or invalid parameters
5. **Recommended Fixes**: Actionable suggestions for improvements

### JSON Report

The JSON report (`validation_report.json`) contains:

```json
{
  "timestamp": "...",
  "theory_version": "16.0",
  "overall_status": "PASS|TENSION|WARNING|FAIL",
  "total_chi_squared": 4.23,
  "n_parameters": 20,
  "summary": {
    "n_pass": 19,
    "n_tension": 1,
    "n_warning": 0,
    "n_fail": 0
  },
  "parameter_validations": [...],
  "dataset_conflicts": [...],
  "geometric_inconsistencies": [...],
  "recommended_fixes": [...]
}
```

## Handling Dataset Conflicts

The validator intelligently handles conflicts between experimental datasets:

### Hubble Tension

- **Planck (CMB)**: H₀ = 67.4 ± 0.5 km/s/Mpc
- **Local measurements**: H₀ ≈ 73 km/s/Mpc

The validator notes which value PM aligns with and flags the tension explicitly.

### Dark Energy

- **ΛCDM**: w = -1.0 (cosmological constant)
- **DESI DR2**: w₀ = -0.827 ± 0.063 (dynamic dark energy)

The validator checks if PM predictions align with dynamic DE as preferred by DESI.

### Neutrino Masses

- **Direct measurements**: Individual neutrino masses
- **Planck + BAO**: Σmᵥ < 0.12 eV (95% CL)

The validator ensures individual mass predictions sum to less than the cosmological bound.

## Exit Codes

- **0**: All parameters PASS or show acceptable TENSION (< 2σ)
- **1**: Some parameters show WARNING (2-3σ)
- **2**: Multiple parameters FAIL (> 3σ)

## Integration with CI/CD

You can integrate the validator into continuous integration:

```bash
# In your CI/CD pipeline
python simulations/global_validator.py --save
if [ $? -eq 2 ]; then
  echo "Critical validation failures detected!"
  exit 1
fi
```

## Example Output

```
================================================================================
PRINCIPIA METAPHYSICA - GLOBAL VALIDATION REPORT
================================================================================

Timestamp: 2025-12-29T07:26:12.234693
Theory Version: 16.0
Overall Status: TENSION

Summary:
  Total Parameters Validated: 20
  PASS (<1-sigma):      19  (95.0%)
  TENSION (1-2-sigma):   1  (5.0%)
  WARNING (2-3-sigma):   0  (0.0%)
  FAIL (>3-sigma):       0  (0.0%)

Total chi-squared: 4.23
Reduced chi-squared: 0.21

--------------------------------------------------------------------------------
DETAILED PARAMETER VALIDATION
--------------------------------------------------------------------------------

TENSION (1 parameters):
--------------------------------------------------------------------------------

  neutrino.theta_13_pred
    Computed:     8.32794 degrees
    Experimental: 8.54 +/- 0.12
    Deviation:    1.77-sigma
    Source:       NuFIT 6.0 (target)
    Derivation:   neutrino_mixing_v16_0
    Notes:        PM prediction should match NuFIT

[... additional parameters ...]

--------------------------------------------------------------------------------
RECOMMENDED FIXES
--------------------------------------------------------------------------------

  1. Neutrino sector: 3 parameter(s) show >1-sigma deviation. Review geometric
     derivation in neutrino_mixing_v16_0.py or neutrino_seesaw_solver.py

  2. Some parameters show 1-2-sigma tension. Review geometric assumptions and
     RG evolution

================================================================================
```

## Architecture

The validator consists of:

1. **ExperimentalConstraint**: Data class representing experimental bounds
2. **ValidationStatus**: Per-parameter validation result
3. **ValidationReport**: Complete validation report with all results
4. **GlobalValidator**: Main validator class with methods:
   - `_init_experimental_constraints()`: Loads all experimental constraints
   - `load_theory_output()`: Loads theory_output.json
   - `validate_all()`: Performs validation
   - `_analyze_conflicts()`: Detects dataset conflicts
   - `_generate_recommendations()`: Creates actionable recommendations
   - `print_summary()`: Human-readable console output
   - `save_report()`: JSON report output

## Future Enhancements

Potential future improvements:

1. Add more experimental constraints (e.g., flavor physics, rare decays)
2. Include pulls/correlations between parameters
3. Bayesian credible intervals instead of frequentist σ
4. Automatic updating of experimental values from online databases
5. Visualization of pulls and chi-squared contributions
6. Comparison between multiple theory versions

## Contact

For questions or issues, contact the PM development team.

Copyright (c) 2025-2026 Andrew Keith Watts. All rights reserved.
