# Simulation Index Documentation

## Overview

The `simulation_index.json` file provides a comprehensive, machine-readable index of all Python simulation files in the Principia Metaphysica framework. This enables dynamic loading, discovery, and navigation of the simulation codebase.

## Generation

Generated: **2025-12-29**

Total Files: **142 Python files**
Total Lines: **65,302 lines of code**
Total Size: **2.48 MB**

The index is automatically generated by scanning the entire `simulations/` directory structure.

## File Structure

```json
{
  "generated": "2025-12-29",
  "total_files": 142,
  "domains": { ... },
  "file_tree": { ... },
  "all_files": [ ... ]
}
```

### Top-Level Fields

- **generated**: ISO date when the index was generated
- **total_files**: Total count of Python files indexed
- **domains**: Files organized by functional domain (flat structure)
- **file_tree**: Files organized in hierarchical directory tree
- **all_files**: Flat array of all files, sorted by path

## Domain Structure

Files are categorized into 25 functional domains:

### V16 Domains (Paper Sections)
- `v16/gauge` - Gauge Unification (2 files)
- `v16/cosmology` - Cosmological Models (8 files)
- `v16/fermion` - Fermion Sector (4 files)
- `v16/neutrino` - Neutrino Physics (2 files)
- `v16/geometric` - Geometric Foundations (3 files)
- `v16/higgs` - Higgs Mechanism (2 files)
- `v16/proton` - Proton Decay (2 files)
- `v16/thermal` - Thermal Physics (2 files)
- `v16/pneuma` - Consciousness & Pneuma (2 files)
- `v16/discussion` - Discussion & Analysis (2 files)
- `v16/predictions` - Predictions & Tests (2 files)
- `v16/introduction` - Introduction (2 files)
- `v16/appendices` - Appendices (15 files)
- `v16/statistics` - Statistical Analysis (4 files)
- `v16/validation` - Validation Suite (3 files)

### Infrastructure Domains
- `base` - Base Infrastructure (9 files)
- `data` - Data Loaders (1 file)
- `derivations` - Mathematical Derivations (16 files)
- `constants` - Constants & Utilities (9 files)
- `validation` - Validation Tools (15 files)
- `ip` - Intellectual Property (4 files)
- `tests` - Test Suite (5 files)
- `reports` - Reports & Analysis (2 files)
- `root` - Root Simulations (25 files)

## File Metadata

Each file entry contains:

```json
{
  "name": "gauge_unification_v16_0.py",
  "path": "simulations/v16/gauge/gauge_unification_v16_0.py",
  "github_url": "https://raw.githubusercontent.com/.../gauge_unification_v16_0.py",
  "description": "Gauge Unification Simulation v16.0",
  "version": "16.0",
  "lines": 1055,
  "size_kb": 43.65
}
```

### Metadata Fields

- **name**: Filename
- **path**: Relative path from repository root
- **github_url**: Direct URL to raw file on GitHub (for dynamic fetching)
- **description**: Extracted from file's docstring (first line)
- **version**: Extracted from filename (e.g., `v16_0` → `16.0`)
- **lines**: Total line count
- **size_kb**: File size in kilobytes

## Usage Examples

### Loading the Index

```javascript
// Fetch the index
const response = await fetch('AutoGenerated/simulation_index.json');
const index = await response.json();

console.log(`Total files: ${index.total_files}`);
console.log(`Generated: ${index.generated}`);
```

### Browsing by Domain

```javascript
// Get all gauge unification simulations
const gaugeFiles = index.domains['v16/gauge'].files;

gaugeFiles.forEach(file => {
  console.log(`${file.name}: ${file.description}`);
  console.log(`  ${file.lines} lines, ${file.size_kb} KB`);
});
```

### Dynamic File Loading

```javascript
// Load a file directly from GitHub
async function loadSimulation(file) {
  const response = await fetch(file.github_url);
  const code = await response.text();
  return code;
}

// Example: Load gauge unification simulation
const gaugeFile = index.domains['v16/gauge'].files
  .find(f => f.name === 'gauge_unification_v16_0.py');

const code = await loadSimulation(gaugeFile);
```

### Searching Files

```javascript
// Find all files related to neutrinos
const neutrino = index.all_files.filter(f =>
  f.description.toLowerCase().includes('neutrino') ||
  f.name.toLowerCase().includes('neutrino')
);

console.log(`Found ${neutrino.length} neutrino-related files`);
```

### Building a File Browser

```javascript
// Create domain navigation
Object.entries(index.domains).forEach(([key, domain]) => {
  console.log(`\n${domain.name} (${domain.files.length} files):`);

  domain.files.forEach(file => {
    console.log(`  - ${file.name}`);
  });
});
```

## File Tree Structure

The `file_tree` field provides a hierarchical view mirroring the directory structure:

```json
{
  "v16": {
    "gauge": {
      "gauge_unification_v16_0.py": { /* file metadata */ }
    },
    "cosmology": { ... }
  },
  "base": {
    "established.py": { /* file metadata */ },
    "formulas.py": { ... }
  }
}
```

### Navigating the Tree

```javascript
// Access a specific file through the tree
const gaugeUnification = index.file_tree.v16.gauge['gauge_unification_v16_0.py'];
console.log(gaugeUnification.description);
```

## Statistics by Domain

### Largest Domains by File Count

1. Root Simulations: 25 files (9,030 lines)
2. Mathematical Derivations: 16 files (10,443 lines)
3. Validation Tools: 15 files (4,359 lines)
4. Appendices: 15 files (8,372 lines)
5. Base Infrastructure: 9 files (4,152 lines)

### Largest Domains by Code Size

1. Mathematical Derivations: 376.37 KB (10,443 lines)
2. Appendices: 342.52 KB (8,372 lines)
3. Root Simulations: 309.52 KB (9,030 lines)
4. Cosmological Models: 211.16 KB (5,106 lines)
5. Validation Tools: 159.81 KB (4,359 lines)

## Integration with Web Interface

The index is designed for seamless integration with web-based simulation browsers:

1. **Discovery**: List all available simulations
2. **Categorization**: Browse by domain/topic
3. **Dynamic Loading**: Fetch code on-demand from GitHub
4. **Search**: Find simulations by name, description, version
5. **Metadata Display**: Show version, size, line count

See `test-simulation-loader.html` for a reference implementation.

## Regeneration

To regenerate the index after adding new simulation files:

```bash
python generate_simulation_index.py
```

This will:
1. Scan all `.py` files in `simulations/`
2. Extract metadata from each file
3. Categorize by domain
4. Build hierarchical tree
5. Write `AutoGenerated/simulation_index.json`

## GitHub Integration

All file entries include a `github_url` field pointing to the raw file on GitHub:

```
https://raw.githubusercontent.com/nshkrdotcom/PrincipiaMetaphysica/main/simulations/{path}
```

This enables:
- Direct file fetching without cloning the repository
- Always up-to-date content (fetches from main branch)
- Cross-origin access for web applications
- CDN-backed delivery through GitHub's infrastructure

## Version Extraction

Version numbers are automatically extracted from filenames:

- `something_v16_0.py` → `16.0`
- `something_v16.py` → `16.0`
- `something.py` → `1.0` (default)

## Description Extraction

Descriptions are extracted from the first line of the file's docstring:

```python
"""
Gauge Unification Simulation v16.0
This module implements gauge coupling unification...
"""
```

Extracts: `"Gauge Unification Simulation v16.0"`

If no docstring is found, a default description is generated:
`"Simulation module: {filename_without_extension}"`

## Performance Considerations

- **Index Size**: ~4,020 lines JSON (~150 KB)
- **Load Time**: ~50-100ms on modern browsers
- **Memory Usage**: ~1-2 MB when loaded
- **File Count**: Scales to thousands of files efficiently

The index is optimized for:
- Fast client-side filtering/searching
- Minimal bandwidth (compressed JSON)
- Tree shaking (load only needed domains)
- Lazy loading (fetch file content on demand)

## Future Enhancements

Potential additions to the index:

- **Dependencies**: Track imports between files
- **Symbols**: Extract functions, classes, constants
- **Tests**: Link to test files
- **Documentation**: Extract full docstrings
- **Tags**: Add manual categorization tags
- **Changelog**: Track version history
- **Examples**: Link to usage examples
- **Benchmarks**: Performance metrics

## Support

For issues or questions about the simulation index:

1. Check this README
2. Review `generate_simulation_index.py`
3. Examine `test-simulation-loader.html` for usage examples
4. Open an issue on GitHub

---

**Last Updated**: 2025-12-29
**Index Version**: 1.0
**Total Simulations**: 142 files
