/**
 * Site Configuration for Principia Metaphysica
 *
 * This file controls site-wide settings including authentication requirements
 * and data source modes.
 *
 * Copyright (c) 2025-2026 Andrew Keith Watts. All rights reserved.
 */

window.PM_CONFIG = window.PM_CONFIG || {};

// =============================================================================
// AUTHENTICATION CONFIGURATION
// =============================================================================

/**
 * AUTH_REQUIRED: Controls Google login requirement
 *
 * - true:  Users must authenticate with Google to view content
 * - false: Site is publicly accessible without login
 *
 * For production with user tracking: true
 * For public/demo access: false
 */
window.PM_CONFIG.AUTH_REQUIRED = false;

// =============================================================================
// DATA SOURCE CONFIGURATION
// =============================================================================

/**
 * OFFLINE_MODE: Controls data source for simulations and theory output
 *
 * - true:  Read from local AutoGenerated/*.json files (for Zenodo packages)
 * - false: Read from Git/online sources (normal website operation)
 *
 * When true, the site works completely offline with bundled data.
 * When false, it fetches latest data from the repository.
 */
window.PM_CONFIG.OFFLINE_MODE = false;

// =============================================================================
// VERSION INFORMATION
// =============================================================================

window.PM_CONFIG.VERSION = '23.1';
window.PM_CONFIG.RELEASE_DATE = '2026-01-25';

// =============================================================================
// FEATURE FLAGS
// =============================================================================

window.PM_CONFIG.FEATURES = {
    // Authentication features (only when AUTH_REQUIRED is true)
    authentication: window.PM_CONFIG.AUTH_REQUIRED,
    userTracking: window.PM_CONFIG.AUTH_REQUIRED,

    // Analytics (can be enabled even without auth)
    analytics: !window.PM_CONFIG.OFFLINE_MODE,

    // Network features (disabled in offline mode)
    cloudSync: !window.PM_CONFIG.OFFLINE_MODE,
    apiCalls: !window.PM_CONFIG.OFFLINE_MODE,

    // Data source
    localData: window.PM_CONFIG.OFFLINE_MODE,
    gitData: !window.PM_CONFIG.OFFLINE_MODE
};

// =============================================================================
// DATA PATHS
// =============================================================================

window.PM_CONFIG.PATHS = {
    // Local paths (for offline mode)
    local: {
        formulas: './AutoGenerated/formulas.json',
        parameters: './AutoGenerated/parameters.json',
        simulations: './AutoGenerated/simulations.json',
        sections: './AutoGenerated/sections.json',
        metadata: './AutoGenerated/metadata.json',
        theoryOutput: './AutoGenerated/theory_output.json'
    },
    // Remote paths (for online mode - relative to site root)
    remote: {
        formulas: './AutoGenerated/formulas.json',
        parameters: './AutoGenerated/parameters.json',
        simulations: './AutoGenerated/simulations.json',
        sections: './AutoGenerated/sections.json',
        metadata: './AutoGenerated/metadata.json',
        theoryOutput: './AutoGenerated/theory_output.json'
    }
};

// =============================================================================
// LEGACY COMPATIBILITY FLAGS
// =============================================================================

window.PM_OFFLINE = window.PM_CONFIG.OFFLINE_MODE;
window.PM_AUTH_REQUIRED = window.PM_CONFIG.AUTH_REQUIRED;

// =============================================================================
// LOGGING
// =============================================================================

const authStatus = window.PM_CONFIG.AUTH_REQUIRED ? 'REQUIRED' : 'DISABLED';
const dataSource = window.PM_CONFIG.OFFLINE_MODE ? 'LOCAL' : 'ONLINE';
console.log(`[PM Config] v${window.PM_CONFIG.VERSION} | Auth: ${authStatus} | Data: ${dataSource}`);
