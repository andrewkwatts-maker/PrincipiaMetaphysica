<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PM Formula Renderer Test</title>
    <link rel="stylesheet" href="css/styles.css">
    <style>
        body {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }
        .demo-section {
            margin-bottom: 3rem;
            padding: 2rem;
            background: var(--bg-card);
            border-radius: 12px;
            border: 1px solid var(--border-primary);
        }
        .demo-section h2 {
            color: var(--accent-primary);
            margin-bottom: 1rem;
        }
        .demo-section p {
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }
        .code-example {
            background: rgba(0, 0, 0, 0.3);
            padding: 1rem;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            color: #51cf66;
            margin: 1rem 0;
            overflow-x: auto;
        }
    </style>

    <!-- Load dependencies -->
    <script src="theory-constants-enhanced.js"></script>
    <script src="js/pm-formula-loader.js"></script>
    <script src="js/formula-registry.js"></script>
    <script src="js/pm-formula-renderer.js"></script>
</head>
<body>
    <h1 style="text-align: center; background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 2rem;">
        PM Formula Renderer Demo
    </h1>

    <!-- Demo 1: Interactive Formula -->
    <div class="demo-section">
        <h2>1. Interactive Formula Display</h2>
        <p>Hoverable variables with tooltips - perfect for inline display in sections.</p>
        <div class="code-example">
PMFormulaRenderer.renderInteractive('master-action-26d', 'demo1', {
    showHint: true,
    large: true
});
        </div>
        <div id="demo1"></div>
    </div>

    <!-- Demo 2: Info Panel -->
    <div class="demo-section">
        <h2>2. Formula Info Panel</h2>
        <p>Shows title, meaning, metadata grid, and use cases.</p>
        <div class="code-example">
PMFormulaRenderer.renderInfoPanel('master-action-26d', 'demo2');
        </div>
        <div id="demo2"></div>
    </div>

    <!-- Demo 3: Plain Text -->
    <div class="demo-section">
        <h2>3. Plain Text Version</h2>
        <p>Monospace, accessible version for AI processing.</p>
        <div class="code-example">
PMFormulaRenderer.renderPlainText('generation-number', 'demo3');
        </div>
        <div id="demo3"></div>
    </div>

    <!-- Demo 4: Expandable Section -->
    <div class="demo-section">
        <h2>4. Expandable Section</h2>
        <p>Collapsible header with sub-components and derivation chain.</p>
        <div class="code-example">
PMFormulaRenderer.renderExpandable('master-action-26d', 'demo4', {
    headerText: 'Master Action Breakdown',
    expanded: false
});
        </div>
        <div id="demo4"></div>
    </div>

    <!-- Demo 5: Full Render -->
    <div class="demo-section">
        <h2>5. Full Render (All Components)</h2>
        <p>Complete display combining all rendering modes.</p>
        <div class="code-example">
PMFormulaRenderer.renderFull('generation-number', 'demo5', {
    showInteractive: true,
    showInfoPanel: true,
    showExpandable: true,
    showPlainText: true,
    interactiveOptions: { large: true }
});
        </div>
        <div id="demo5"></div>
    </div>

    <!-- Demo 6: Multiple Formulas (Batch Render) -->
    <div class="demo-section">
        <h2>6. Batch Rendering</h2>
        <p>Render multiple formulas at once (useful for formula lists).</p>
        <div class="code-example">
PMFormulaRenderer.renderBatch(
    ['generation-number', 'gut-scale', 'w0-formula'],
    { containerSelector: '.batch-container', renderMode: 'interactive' }
);
        </div>
        <div class="batch-container" style="margin-top: 1rem;"></div>
        <div class="batch-container" style="margin-top: 1rem;"></div>
        <div class="batch-container" style="margin-top: 1rem;"></div>
    </div>

    <script>
        // Wait for DOM to be ready
        document.addEventListener('DOMContentLoaded', function() {
            // Demo 1: Interactive
            PMFormulaRenderer.renderInteractive('master-action-26d', 'demo1', {
                showHint: true,
                large: true
            });

            // Demo 2: Info Panel
            // Note: This will work if the formula has infoGrid and useCases defined
            PMFormulaRenderer.renderInfoPanel('master-action-26d', 'demo2');

            // Demo 3: Plain Text
            PMFormulaRenderer.renderPlainText('generation-number', 'demo3');

            // Demo 4: Expandable
            // Note: This will work if the formula has subComponents and derivation defined
            PMFormulaRenderer.renderExpandable('master-action-26d', 'demo4', {
                headerText: 'Master Action Breakdown',
                expanded: false
            });

            // Demo 5: Full Render
            PMFormulaRenderer.renderFull('generation-number', 'demo5', {
                showInteractive: true,
                showInfoPanel: true,
                showExpandable: true,
                showPlainText: true,
                interactiveOptions: { large: true }
            });

            // Demo 6: Batch Render
            PMFormulaRenderer.renderBatch(
                ['generation-number', 'gut-scale', 'w0-formula'],
                { containerSelector: '.batch-container', renderMode: 'interactive' }
            );
        });
    </script>
</body>
</html>
